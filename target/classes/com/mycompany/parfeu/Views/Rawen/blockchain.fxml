<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="800" prefWidth="950" style="-fx-background-color: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);" xmlns="http://javafx.com/javafx/8.0.171" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.mycompany.parfeu.Controller.Rawen.BlockchainController">

    <BorderPane prefHeight="800.0" prefWidth="950.0">
        <!-- HEADER -->
        <top>
            <VBox alignment="CENTER" prefHeight="100.0" style="-fx-background-color: linear-gradient(to right, #ffa751, #ffe259);">
                <padding>
                    <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                </padding>
                <Label text="ðŸ”— BLOCKCHAIN HISTORY" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="32.0" />
                    </font>
                </Label>
                <Label text="Immutable ledger of firewall decisions" textFill="#FFF8DC">
                    <font>
                        <Font name="System Bold Italic" size="16.0" />
                    </font>
                </Label>
            </VBox>
        </top>

        <!-- CENTER -->
        <center>
            <VBox spacing="20.0">
                <padding>
                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                </padding>

                <!-- INFO PANEL -->
                <HBox alignment="CENTER" spacing="30.0" style="-fx-background-color: rgba(255,255,255,0.95); -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 3);">
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>
                    
                    <VBox alignment="CENTER" spacing="5">
                        <Label style="-fx-text-fill: #7f8c8d;" text="ðŸ“¦ TOTAL BLOCKS">
                            <font><Font name="System Bold" size="12.0" /></font>
                        </Label>
                        <Label fx:id="totalBlocksLabel" style="-fx-text-fill: #ffa751;" text="0">
                            <font><Font name="System Bold" size="28.0" /></font>
                        </Label>
                    </VBox>

                    <Separator orientation="VERTICAL" />

                    <VBox alignment="CENTER" spacing="5">
                        <Label style="-fx-text-fill: #7f8c8d;" text="âœ… CHAIN STATUS">
                            <font><Font name="System Bold" size="12.0" /></font>
                        </Label>
                        <Label fx:id="chainStatusLabel" style="-fx-text-fill: #27ae60;" text="VALID">
                            <font><Font name="System Bold" size="20.0" /></font>
                        </Label>
                    </VBox>

                    <Separator orientation="VERTICAL" />

                    <VBox alignment="CENTER" spacing="5">
                        <Label style="-fx-text-fill: #7f8c8d;" text="ðŸ• LAST UPDATE">
                            <font><Font name="System Bold" size="12.0" /></font>
                        </Label>
                        <Label fx:id="lastUpdateLabel" style="-fx-text-fill: #2c3e50;" text="-">
                            <font><Font name="System Bold" size="14.0" /></font>
                        </Label>
                    </VBox>
                </HBox>

                <!-- TABLE VIEW -->
                <VBox spacing="10" style="-fx-background-color: rgba(255,255,255,0.95); -fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 3);">
                    <padding>
                        <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                    </padding>

                    <Label text="ðŸ“Š Block Records" textFill="#ffa751">
                        <font>
                            <Font name="System Bold" size="20.0" />
                        </font>
                    </Label>

                    <TableView fx:id="blockchainTable" prefHeight="450" style="-fx-background-color: #FAFAFA; -fx-background-radius: 8;">
                        <columns>
                            <TableColumn fx:id="colBlockIndex" prefWidth="80" text="Block #">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="index" />
                                </cellValueFactory>
                            </TableColumn>
                            
                            <TableColumn fx:id="colTimestamp" prefWidth="150" text="Timestamp">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="timestamp" />
                                </cellValueFactory>
                            </TableColumn>
                            
                            <TableColumn fx:id="colSrcIP" prefWidth="120" text="Source IP">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="srcIP" />
                                </cellValueFactory>
                            </TableColumn>
                            
                            <TableColumn fx:id="colDestIP" prefWidth="120" text="Dest IP">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="destIP" />
                                </cellValueFactory>
                            </TableColumn>
                            
                            <TableColumn fx:id="colProtocol" prefWidth="80" text="Protocol">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="protocol" />
                                </cellValueFactory>
                            </TableColumn>
                            
                            <TableColumn fx:id="colDecisions" prefWidth="80" text="Decisions">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="decisionsCount" />
                                </cellValueFactory>
                            </TableColumn>
                            
                            <TableColumn fx:id="colHash" prefWidth="200" text="Hash">
                                <cellValueFactory>
                                    <javafx.scene.control.cell.PropertyValueFactory property="hashShort" />
                                </cellValueFactory>
                            </TableColumn>
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>
                </VBox>

            </VBox>
        </center>

        <!-- BOTTOM -->
        <bottom>
            <HBox alignment="CENTER" prefHeight="147.0" prefWidth="911.0" spacing="20.0" style="-fx-background-color: #1a1a2e;">
                <padding>
                    <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                </padding>
                <Button fx:id="backBtn" prefHeight="45" prefWidth="180" style="-fx-background-color: #16213e; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-font-size: 14;" text="â† BACK TO MENU" />
                <Button fx:id="refreshBtn" prefHeight="45" prefWidth="150" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-font-size: 14;" text="ðŸ”„ REFRESH" />
                <Button fx:id="verifyBtn" prefHeight="45" prefWidth="180" style="-fx-background-color: linear-gradient(to right, #ffa751, #ffe259); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-font-size: 14; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 3);" text="âœ“ VERIFY CHAIN" />
                <Button fx:id="exportBtn" prefHeight="45" prefWidth="150" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 10; -fx-font-size: 14;" text="ðŸ“¤ EXPORT" />
            </HBox>
        </bottom>
    </BorderPane>

</AnchorPane>
