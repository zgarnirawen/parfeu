<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<AnchorPane fx:id="rootPane" prefHeight="800" prefWidth="650" style="-fx-background-color: linear-gradient(to bottom, #E3F2FD, #FFF3E0);" xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/8.0.171" fx:controller="com.mycompany.parfeu.Controller.Mahran.ConfigurationController">

    <!-- Header -->
    <VBox fx:id="headerBox" prefHeight="80" spacing="10" style="-fx-background-color: linear-gradient(to right, #1976D2, #FF6F00); -fx-alignment: center; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 8,0,0,2);" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="0">
        <Label style="-fx-text-fill: white;" text="âš™ Pare-feu Configurations">
            <font>
                <Font name="Arial Black" size="24" />
            </font>
        </Label>
    </VBox>

    <!-- Scrollable Content -->
    <ScrollPane fx:id="scrollPane" fitToWidth="true" style="-fx-background-color: transparent;" AnchorPane.bottomAnchor="120" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" AnchorPane.topAnchor="80">
        <VBox spacing="20">
            <padding>
                <Insets bottom="25" left="25" right="25" top="25" />
            </padding>

            <!-- Seuils de dÃ©cision -->
            <TitledPane expanded="true" text="Seuils de dÃ©cision"
                        style="-fx-background-color: linear-gradient(to right, #64B5F6, #1976D2);
                               -fx-text-fill: #0D47A1; -fx-font-weight: bold;
                               -fx-border-radius: 12; -fx-background-radius: 12;
                               -fx-border-color: #1976D2; -fx-border-width: 2;">
                <GridPane hgap="15" vgap="15">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <Label style="-fx-text-fill: #0A0A0A; -fx-font-weight: bold;" text="Blocage:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <Spinner fx:id="blockThresholdSpinner" editable="true" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                    <Label style="-fx-text-fill: #0A0A0A; -fx-font-weight: bold;" text="Alerte:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Spinner fx:id="alertThresholdSpinner" editable="true" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                    <columnConstraints>
                        <ColumnConstraints />
                        <ColumnConstraints />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>
            </TitledPane>

            <!-- Taille des paquets -->
            <TitledPane expanded="true" text="Taille des paquets"
                        style="-fx-background-color: linear-gradient(to right, #FFB74D, #FF6F00);
                               -fx-text-fill: #0D47A1; -fx-font-weight: bold;
                               -fx-border-radius: 12; -fx-background-radius: 12;
                               -fx-border-color: #FF6F00; -fx-border-width: 2;">
                <GridPane hgap="15" vgap="15">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <Label style="-fx-text-fill: #0A0A0A; -fx-font-weight: bold;" text="Taille min:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <TextField fx:id="minPacketSizeField" style="-fx-text-fill: #0A0A0A;" text="20" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                    <Label style="-fx-text-fill: #0A0A0A; -fx-font-weight: bold;" text="Taille max:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <TextField fx:id="maxPacketSizeField" style="-fx-text-fill: #0A0A0A;" text="65535" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                    <columnConstraints>
                        <ColumnConstraints />
                        <ColumnConstraints />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>
            </TitledPane>

            <!-- Mots suspects -->
            <TitledPane expanded="true" text="Mots suspects"
                        style="-fx-background-color: linear-gradient(to right, #42A5F5, #1E88E5);
                               -fx-text-fill: #0D47A1; -fx-font-weight: bold;
                               -fx-border-radius: 12; -fx-background-radius: 12;
                               -fx-border-color: #1E88E5; -fx-border-width: 2;">
                <VBox spacing="10">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <ListView fx:id="suspiciousWordsList" prefHeight="120" style="-fx-text-fill: #0A0A0A; -fx-control-inner-background: #E3F2FD; -fx-border-radius: 8; -fx-background-radius: 8;" />
                    <HBox spacing="10">
                        <TextField fx:id="newSuspiciousWordField" promptText="Ajouter un mot" style="-fx-text-fill: #0A0A0A;" />
                        <Button fx:id="addWordButton" style="-fx-background-color: #1976D2; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Ajouter" />
                        <Button fx:id="removeWordButton" style="-fx-background-color: #0D47A1; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Supprimer" />
                    </HBox>
                </VBox>
            </TitledPane>

            <!-- IPs blacklistÃ©es -->
            <TitledPane expanded="true" text="IPs blacklistÃ©es"
                        style="-fx-background-color: linear-gradient(to right, #FF9800, #F57C00);
                               -fx-text-fill: #0D47A1; -fx-font-weight: bold;
                               -fx-border-radius: 12; -fx-background-radius: 12;
                               -fx-border-color: #F57C00; -fx-border-width: 2;">
                <VBox spacing="10">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <ListView fx:id="blacklistedIPsList" prefHeight="120" style="-fx-text-fill: #0A0A0A; -fx-control-inner-background: #FFF3E0; -fx-border-radius: 8; -fx-background-radius: 8;" />
                    <HBox spacing="10">
                        <TextField fx:id="newIPField" promptText="Ajouter une IP" style="-fx-text-fill: #0A0A0A;" />
                        <Button fx:id="addIPButton" style="-fx-background-color: #FF6F00; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Ajouter" />
                        <Button fx:id="removeIPButton" style="-fx-background-color: #E65100; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Supprimer" />
                    </HBox>
                </VBox>
            </TitledPane>

            <!-- Ports surveillÃ©s -->
            <TitledPane expanded="true" text="Ports surveillÃ©s"
                        style="-fx-background-color: linear-gradient(to right, #2196F3, #1565C0);
                               -fx-text-fill: #0D47A1; -fx-font-weight: bold;
                               -fx-border-radius: 12; -fx-background-radius: 12;
                               -fx-border-color: #1565C0; -fx-border-width: 2;">
                <VBox spacing="10">
                    <padding>
                        <Insets bottom="15" left="15" right="15" top="15" />
                    </padding>
                    <ListView fx:id="monitoredPortsList" prefHeight="120" style="-fx-text-fill: #0A0A0A; -fx-control-inner-background: #E3F2FD; -fx-border-radius: 8; -fx-background-radius: 8;" />
                    <HBox spacing="10">
                        <TextField fx:id="newPortField" promptText="Port (0-65535)" style="-fx-text-fill: #0A0A0A;" />
                        <Button fx:id="addPortButton" style="-fx-background-color: #1976D2; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Ajouter" />
                        <Button fx:id="removePortButton" style="-fx-background-color: #0D47A1; -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Supprimer" />
                    </HBox>
                </VBox>
            </TitledPane>

        </VBox>
    </ScrollPane>

    <!-- Boutons en bas -->
    <HBox alignment="CENTER" spacing="15" style="-fx-background-color: #263238;" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0">
        <padding>
            <Insets bottom="15" left="20" right="20" top="15" />
        </padding>

        <Button fx:id="backBtn" prefHeight="40" prefWidth="120" style="-fx-background-color: #455A64; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-font-size: 13;" text="â† Retour" />
        <Button fx:id="saveConfigBtn" prefHeight="40" prefWidth="140" style="-fx-background-color: linear-gradient(to right, #1976D2, #2196F3); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-font-size: 13;" text="ðŸ’¾ Sauvegarder" />
        <Button fx:id="loadConfigBtn" prefHeight="40" prefWidth="120" style="-fx-background-color: linear-gradient(to right, #FF6F00, #FF8F00); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-font-size: 13;" text="ðŸ“¥ Charger" />
        <Button fx:id="exportConfigBtn" prefHeight="40" prefWidth="120" style="-fx-background-color: linear-gradient(to right, #0D47A1, #1976D2); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-font-size: 13;" text="ðŸ“¤ Exporter" />
        <Button fx:id="resetConfigBtn" prefHeight="40" prefWidth="100" style="-fx-background-color: linear-gradient(to right, #E65100, #FF6F00); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8; -fx-font-size: 13;" text="ðŸ”„ Reset" />
    </HBox>

</AnchorPane>
